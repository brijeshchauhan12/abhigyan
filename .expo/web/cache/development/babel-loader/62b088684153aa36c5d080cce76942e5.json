{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/brijesh/Desktop/Abhigyaan-main/screens/teacher/TeacherReply.js\";\nimport React, { useState, useEffect } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { useSelector } from 'react-redux';\nimport TopHeader from \"../../components/topheader\";\n\nvar TeacherReply = function TeacherReply(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var question = route.params.question;\n  var user = useSelector(function (state) {\n    return state.Auth.userdata;\n  });\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      reply = _useState2[0],\n      setReply = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      comments = _useState8[0],\n      setComments = _useState8[1];\n\n  useEffect(function () {\n    if (error) {\n      Alert.alert('An Error Occurred!', error, [{\n        text: 'Okay'\n      }]);\n    }\n  }, [error]);\n  useEffect(function () {\n    if (comments.length == 0) {\n      getComment();\n    }\n  }, [comments]);\n\n  var getComment = function getComment() {\n    var details = {\n      question_id: question.id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/teacher_questions_reply_list', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        setComments(res.data);\n      }\n    }).catch(function (err) {\n      setError(err.message);\n    });\n  };\n\n  var submitReplay = function submitReplay() {\n    setError(null);\n\n    if (reply == null || reply == '') {\n      return;\n    }\n\n    setLoading(true);\n    var details = {\n      user_type: 'teacher',\n      question_id: question.id,\n      reply: reply,\n      id: user.st_id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/submit_topic_comment_reply', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        setReply('');\n        getComment();\n      }\n\n      setLoading(false);\n    }).catch(function (err) {\n      setError(err.message);\n      setLoading(false);\n    });\n  };\n\n  var ItemSeparatorView = function ItemSeparatorView() {\n    return React.createElement(View, {\n      style: {\n        height: 0.5,\n        width: '100%',\n        backgroundColor: '#C8C8C8'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    });\n  };\n\n  var ItemView = function ItemView(_ref2) {\n    var item = _ref2.item;\n    return React.createElement(View, {\n      style: {\n        flexDirection: \"row\",\n        marginVertical: 5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 1,\n        paddingHorizontal: 5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#444\",\n        fontSize: 14\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, item.reply)));\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, React.createElement(TopHeader, {\n    title: \"Question Reply\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      flex: 1,\n      marginTop: 10,\n      paddingHorizontal: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, question.question), React.createElement(View, {\n    style: {\n      marginTop: 10,\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, React.createElement(TextInput, {\n    style: {\n      padding: 5,\n      borderRadius: 4,\n      borderColor: '#ccc',\n      borderWidth: 1,\n      textAlignVertical: 'top'\n    },\n    placeholder: \"Enter question replay..\",\n    onChangeText: setReply,\n    value: reply,\n    numberOfLines: 3,\n    multiline: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: {\n      marginTop: 10,\n      marginBottom: 10,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return submitReplay();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, React.createElement(LinearGradient, {\n    colors: ['#00913d', '#008252'],\n    start: [.9, .0],\n    style: {\n      padding: 5,\n      alignItems: 'center',\n      borderRadius: 5,\n      width: 150,\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    color: \"#ffffff\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 30\n    }\n  }) : React.createElement(Text, {\n    style: {\n      backgroundColor: 'transparent',\n      fontSize: 16,\n      color: '#fff',\n      fontFamily: \"Poppins-Bold\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }, \"Submit\"))))), React.createElement(Text, {\n    style: {\n      padding: 5,\n      color: \"#444\",\n      fontSize: 17,\n      fontWeight: \"bold\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, \"Reply Lists\"), React.createElement(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      justifyContent: 'center',\n      flex: 1,\n      backgroundColor: '#F0F0F0'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, React.createElement(FlatList, {\n    data: comments,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    ItemSeparatorComponent: ItemSeparatorView,\n    enableEmptySections: true,\n    renderItem: ItemView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default TeacherReply;","map":{"version":3,"sources":["/home/brijesh/Desktop/Abhigyaan-main/screens/teacher/TeacherReply.js"],"names":["React","useState","useEffect","LinearGradient","useSelector","TopHeader","TeacherReply","route","navigation","question","params","user","state","Auth","userdata","reply","setReply","error","setError","loading","setLoading","comments","setComments","Alert","alert","text","length","getComment","details","question_id","id","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","fetch","method","headers","body","then","res","json","status","JSON","stringify","message","data","catch","err","submitReplay","user_type","st_id","ItemSeparatorView","height","width","backgroundColor","ItemView","item","flexDirection","marginVertical","flex","paddingHorizontal","color","fontSize","marginTop","marginBottom","padding","borderRadius","borderColor","borderWidth","textAlignVertical","alignItems","justifyContent","fontFamily","fontWeight","index","toString"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect} from 'react';\nimport {\n  SafeAreaView,\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  FlatList,\n  ActivityIndicator,\n  Alert\n} from 'react-native';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { useSelector } from 'react-redux';\nimport TopHeader from '../../components/topheader';\n\nconst TeacherReply = ({route,navigation}) => {\n  const {question} = route.params;\n  const user = useSelector(state => state.Auth.userdata);\n  const [reply,setReply] = useState('');\n  const [error, setError]=useState(null);\n  const [loading,setLoading] = useState(false);\n  const [comments, setComments]=useState([]);\n\n  useEffect(() => {\n      if (error) {\n        Alert.alert('An Error Occurred!', error, [{ text: 'Okay' }]);\n      }\n  }, [error]);\n\n  useEffect(() => {\n    if (comments.length == 0) {\n      getComment();\n    }\n  }, [comments]);\n\n  const getComment = ()=>{\n    let details = {\n        question_id:question.id\n    }\n    let formBody = [];\n    for (let property in details) {\n        let encodedKey = encodeURIComponent(property);\n        let encodedValue = encodeURIComponent(details[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n    formBody = formBody.join(\"&\");\n\n    fetch('http://ais.omsai.info/api/v1/teacher_questions_reply_list', {\n          method: 'POST',\n          headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          body: formBody\n    }).then(res => res.json()).then(res => {\n      if(res.status != 200){\n        setError(JSON.stringify(res.message))\n      }else{\n        // console.log(res.data)\n        setComments(res.data)\n      }\n    }).catch(err=>{\n      setError(err.message)\n    })\n  };\n\n  const submitReplay = () =>{\n    setError(null)\n    if(reply== null || reply ==''){\n        return;\n    }\n    setLoading(true)\n    let details = {\n        user_type:'teacher',\n        question_id:question.id,\n        reply:reply,\n        id:user.st_id\n    };\n\n    let formBody = [];\n    for (let property in details) {\n        let encodedKey = encodeURIComponent(property);\n        let encodedValue = encodeURIComponent(details[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n    formBody = formBody.join(\"&\");\n\n    fetch('http://ais.omsai.info/api/v1/submit_topic_comment_reply', {\n          method: 'POST',\n          headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          body: formBody\n    }).then(res => res.json()).then(res => {\n      if(res.status != 200){\n        setError(JSON.stringify(res.message))\n      }else{\n        setReply('')\n        getComment()\n      }\n      setLoading(false)\n    }).catch(err=>{\n      setError(err.message)\n      setLoading(false)\n    })\n  };\n\n  const ItemSeparatorView = () => {\n    return (\n      // Flat List Item Separator\n      <View\n        style={{\n          height: 0.5,\n          width: '100%',\n          backgroundColor: '#C8C8C8',\n        }}\n      />\n    );\n  };\n\n  const ItemView = ({item}) => {\n    return (\n      // Flat List Item\n      <View style={{\n          flexDirection: \"row\",\n          marginVertical:5\n        }}>\n        <View style={{flex:1, paddingHorizontal:5}}>\n          <Text style={{\n            color: \"#444\",\n            fontSize: 14\n          }}>{item.reply}</Text>\n        </View>\n      </View>\n    );\n  };\n\n  return (\n    <View style={{flex: 1}}>\n      <TopHeader title=\"Question Reply\" />\n      <View style={{flex:1,marginTop:10, paddingHorizontal:10}}>\n        <Text>{question.question}</Text>\n        <View style={{marginTop:10, marginBottom:10}}>\n            <TextInput\n                style={{padding:5,borderRadius:4,borderColor:'#ccc', borderWidth: 1, textAlignVertical: 'top' }}\n                placeholder=\"Enter question replay..\"\n                onChangeText={setReply}\n                value={reply}\n                numberOfLines={3}\n                multiline={true}\n                />\n            <View style={{marginTop:10, marginBottom:10, flexDirection:'row', alignItems:'center', justifyContent:'center'}}>\n              <TouchableOpacity onPress={()=>submitReplay()}>\n                <LinearGradient\n                    colors={['#00913d', '#008252']}\n                    start={[.9,.0]}\n                    style={{ padding: 5,\n                    alignItems: 'center',\n                    borderRadius: 5,\n                    width:150,\n                    marginTop:20 }}>\n                    {loading?<ActivityIndicator color=\"#ffffff\"/>:\n                    <Text\n                        style={{\n                          backgroundColor: 'transparent',\n                          fontSize: 16,\n                          color: '#fff',\n                          fontFamily:\"Poppins-Bold\"\n                        }}>\n                        Submit\n                    </Text>}\n                </LinearGradient>\n              </TouchableOpacity>\n            </View>\n        </View>\n        <Text style={{padding:5,color: \"#444\",fontSize: 17,fontWeight: \"bold\"}}>Reply Lists</Text>\n        <SafeAreaView style={{flex: 1}}>\n          <View style={{justifyContent: 'center',flex: 1,backgroundColor:'#F0F0F0'}}>\n            <FlatList\n              data={comments}\n              keyExtractor={(item, index) => index.toString()}\n              ItemSeparatorComponent={ItemSeparatorView}\n              enableEmptySections={true}\n              renderItem={ItemView}\n            />\n          </View>\n        </SafeAreaView>\n      </View>\n    </View>\n  );\n};\n\nexport default TeacherReply;"]},"metadata":{},"sourceType":"module"}