{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/brijesh/Desktop/Abhigyaan-main/screens/ShortVideo.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Video } from 'expo-av';\nimport VideoPlayer from 'expo-video-player';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TopHeader from \"../components/topheader\";\nimport Const from \"../components/constant\";\n\nvar ShortVideo = function ShortVideo(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      video = _useState6[0],\n      setVideo = _useState6[1];\n\n  var getVideo = function getVideo() {\n    setError(null);\n    setLoading(true);\n    var details = {\n      school_id: Const.school_id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/short_video', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        setVideo(res.data.video_path);\n      }\n\n      setLoading(false);\n    }).catch(function (err) {\n      setError(err.message);\n      setLoading(false);\n    });\n  };\n\n  useEffect(function () {\n    if (video == null) {\n      getVideo();\n    }\n  }, [video]);\n  useEffect(function () {\n    if (error) {\n      Alert.alert('An Error Occurred!', error, [{\n        text: 'Okay'\n      }]);\n    }\n  }, [error]);\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, video && React.createElement(VideoPlayer, {\n    videoProps: {\n      shouldPlay: true,\n      resizeMode: Video.RESIZE_MODE_CONTAIN,\n      source: {\n        uri: video\n      }\n    },\n    inFullscreen: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default ShortVideo;","map":{"version":3,"sources":["/home/brijesh/Desktop/Abhigyaan-main/screens/ShortVideo.js"],"names":["React","useEffect","useState","Video","VideoPlayer","TopHeader","Const","ShortVideo","navigation","error","setError","loading","setLoading","video","setVideo","getVideo","details","school_id","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","fetch","method","headers","body","then","res","json","status","JSON","stringify","message","data","video_path","catch","err","Alert","alert","text","flex","shouldPlay","resizeMode","RESIZE_MODE_CONTAIN","source","uri"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Video } from 'expo-av';\nimport VideoPlayer from 'expo-video-player'\nimport { View, Text, TouchableOpacity, StyleSheet, Alert } from 'react-native';\nimport TopHeader from '../components/topheader';\nimport Const from '../components/constant'\n\nconst ShortVideo = ({navigation}) => {\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [video, setVideo] = useState(null);\n  const getVideo = () =>{\n    setError(null)\n    setLoading(true)\n    let details = {\n      school_id:Const.school_id\n    }\n\n    let formBody = [];\n    for (let property in details) {\n        let encodedKey = encodeURIComponent(property);\n        let encodedValue = encodeURIComponent(details[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n    formBody = formBody.join(\"&\");\n\n    fetch('http://ais.omsai.info/api/v1/short_video', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: formBody\n    }).then(res => res.json()).then((res)=>{\n        if(res.status != 200){\n            setError(JSON.stringify(res.message))\n        }else{\n          setVideo(res.data.video_path);\n        }\n        setLoading(false)\n        \n    }).catch((err)=>{\n        setError(err.message)\n        setLoading(false)\n    })\n  }\n  useEffect(()=>{\n    if(video == null){\n      getVideo();\n    }\n  },[video]);\n\n  useEffect(()=>{\n    if(error){\n      Alert.alert('An Error Occurred!', error, [{ text: 'Okay' }]);\n    }\n  },[error])\n\n  return (\n    <View style={{flex:1}}>\n      {video &&\n        <VideoPlayer\n            videoProps={{\n                shouldPlay: true,\n                resizeMode: Video.RESIZE_MODE_CONTAIN,\n                source: {uri: video},\n            }}\n            inFullscreen={true}\n          />}\n    </View>\n  )\n}\n\nexport default ShortVideo;"]},"metadata":{},"sourceType":"module"}