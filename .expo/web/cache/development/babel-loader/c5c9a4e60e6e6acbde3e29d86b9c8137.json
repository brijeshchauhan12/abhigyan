{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/brijesh/Desktop/Abhigyaan-main/screens/playvideo.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Video } from 'expo-av';\nimport VideoPlayer from 'expo-video-player';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Button, List, Modal, Portal, Provider } from 'react-native-paper';\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport { useSelector } from 'react-redux';\nimport { useOrientation } from \"../components/useOrientation\";\nimport { TouchableOpacity } from 'react-native-gesture-handler';\n\nvar PlayVideo = function PlayVideo(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var user = useSelector(function (state) {\n    return state.Auth.userdata;\n  });\n  var orientation = useOrientation();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalData = _useState4[0],\n      setModalData = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      questions = _useState8[0],\n      setQuestions = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      question = _useState10[0],\n      setQuestion = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      reply = _useState14[0],\n      setReply = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      rploading = _useState16[0],\n      setRpLoading = _useState16[1];\n\n  var _route$params = route.params,\n      id = _route$params.id,\n      videolink = _route$params.videolink,\n      video_name = _route$params.video_name;\n\n  var showModal = function showModal(q) {\n    setModalData(q);\n    setVisible(true);\n  };\n\n  var hideModal = function hideModal() {\n    setModalData(null);\n    setVisible(false);\n  };\n\n  var getComment = function getComment() {\n    var details = {\n      user_type: 'student',\n      topic_id: id,\n      id: user.st_id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/topic_comment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        setQuestions(res.data);\n      }\n    }).catch(function (err) {\n      setError(err.message);\n    });\n  };\n\n  var submit = function submit() {\n    setError(null);\n\n    if (question == null || question == '') {\n      return;\n    }\n\n    setLoading(true);\n    var details = {\n      user_type: 'student',\n      topic_id: id,\n      question: question,\n      id: user.st_id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/submit_topic_comment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        Alert.alert(\"Success\", \"Question saved.\", [{\n          text: \"OK\"\n        }]);\n        setQuestion('');\n        getComment();\n      }\n\n      setLoading(false);\n    }).catch(function (err) {\n      setError(err.message);\n      setLoading(false);\n    });\n  };\n\n  var submitReplay = function submitReplay() {\n    setError(null);\n\n    if (reply == null || reply == '') {\n      return;\n    }\n\n    setRpLoading(true);\n    var details = {\n      user_type: 'student',\n      question_id: modalData ? modalData.id : '',\n      reply: reply,\n      id: user.st_id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/submit_topic_comment_reply', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        hideModal();\n        setReply('');\n        getComment();\n      }\n\n      setRpLoading(false);\n    }).catch(function (err) {\n      setError(err.message);\n      setRpLoading(false);\n    });\n  };\n\n  useEffect(function () {\n    if (questions == null) {\n      getComment();\n    }\n  }, [questions]);\n  useEffect(function () {\n    if (error) {\n      Alert.alert('An Error Occurred!', error, [{\n        text: 'Okay'\n      }]);\n    }\n  }, [error]);\n  return React.createElement(Provider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, React.createElement(Portal, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, React.createElement(Modal, {\n    visible: visible,\n    onDismiss: function onDismiss() {\n      return setVisible(false);\n    },\n    contentContainerStyle: styles.modal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: {\n      alignSelf: 'stretch'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 16,\n      fontFamily: \"Rubik-Bold\",\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, \"Reply\"), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 14,\n      fontFamily: \"Rubik-Bold\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }, \"Question:-\"), React.createElement(Text, {\n    style: {\n      fontSize: 12\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, modalData ? modalData.question : '')), React.createElement(View, {\n    style: {\n      marginTop: 10,\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }, React.createElement(TextInput, {\n    style: {\n      padding: 5,\n      borderRadius: 4,\n      borderColor: '#ccc',\n      borderWidth: 1,\n      textAlignVertical: 'top'\n    },\n    placeholder: \"Enter question replay..\",\n    onChangeText: setReply,\n    value: reply,\n    numberOfLines: 3,\n    multiline: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }))), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-around'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 21\n    }\n  }, React.createElement(Button, {\n    mode: \"contained\",\n    color: \"#C53030\",\n    onPress: function onPress() {\n      return hideModal();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }, \"Cancel\"), React.createElement(Button, {\n    loading: rploading,\n    mode: \"contained\",\n    color: \"#00913d\",\n    onPress: function onPress() {\n      return submitReplay();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 25\n    }\n  }, \"Submit\")))), React.createElement(View, {\n    style: styles.main,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: 'row'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, React.createElement(VideoPlayer, {\n    videoProps: {\n      shouldPlay: false,\n      resizeMode: Video.RESIZE_MODE_CONTAIN,\n      source: {\n        uri: 'http://ais.omsai.info/' + video_name\n      }\n    },\n    inFullscreen: true,\n    showFullscreenButton: true,\n    width: Dimensions.get('window').width,\n    height: orientation == 'PORTRAIT' ? Dimensions.get('window').height * 40 / 100 : Dimensions.get('window').height,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  })), React.createElement(ScrollView, {\n    keyboardShouldPersistTaps: 'handled',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: {\n      paddingLeft: 10,\n      paddingRight: 10,\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 21\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 16\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 29\n    }\n  }, \"Have any question?\")), React.createElement(View, {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, React.createElement(TextInput, {\n    style: {\n      padding: 5,\n      borderRadius: 4,\n      borderColor: '#ccc',\n      borderWidth: 1,\n      textAlignVertical: 'top'\n    },\n    placeholder: \"Enter question\",\n    onChangeText: setQuestion,\n    value: question,\n    numberOfLines: 3,\n    multiline: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 29\n    }\n  })), React.createElement(View, {\n    style: {\n      marginTop: 10,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 25\n    }\n  }, React.createElement(Button, {\n    loading: loading,\n    mode: \"contained\",\n    color: \"#C53030\",\n    onPress: function onPress() {\n      return submit();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 29\n    }\n  }, \"Submit\")), questions != null && questions.length > 0 && React.createElement(View, {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 29\n    }\n  }, React.createElement(List.Section, {\n    style: styles.list,\n    titleStyle: {\n      fontSize: 15\n    },\n    title: \"Questions (\" + questions.length + \")\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 33\n    }\n  }, questions.map(function (q, qi) {\n    return q.answers.length > 0 ? React.createElement(List.Accordion, {\n      key: 'acc-' + qi,\n      style: styles.listAccord,\n      titleStyle: styles.listAccordTitle,\n      title: q.question,\n      left: function left(props) {\n        return React.createElement(FontAwesome, _extends({}, props, {\n          name: \"comment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 192\n          }\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 64\n      }\n    }, q.answers.map(function (a, ai) {\n      return React.createElement(List.Item, {\n        key: 'ans-' + ai,\n        style: styles.listItem,\n        titleStyle: styles.listItemTitle,\n        title: a.reply,\n        left: function left(props) {\n          return React.createElement(FontAwesome, _extends({}, props, {\n            style: {\n              marginTop: 10\n            },\n            name: \"comments-o\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 184\n            }\n          }));\n        },\n        right: function right(props) {\n          return ai == 0 && React.createElement(TouchableOpacity, _extends({}, props, {\n            onPress: function onPress() {\n              return showModal(q);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 279\n            }\n          }), React.createElement(FontAwesome, {\n            name: \"reply\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 335\n            }\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 68\n        }\n      });\n    })) : React.createElement(List.Item, {\n      key: 'acc-' + qi,\n      style: styles.listAccord,\n      titleStyle: styles.listAccordTitle,\n      title: q.question,\n      left: function left(props) {\n        return React.createElement(FontAwesome, _extends({}, props, {\n          style: {\n            marginTop: 10\n          },\n          name: \"comment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 165\n          }\n        }));\n      },\n      right: function right(props) {\n        return React.createElement(TouchableOpacity, _extends({}, props, {\n          onPress: function onPress() {\n            return showModal(q);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 246\n          }\n        }), React.createElement(FontAwesome, {\n          style: {\n            padding: 5\n          },\n          name: \"reply\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 302\n          }\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 42\n      }\n    });\n  })))))));\n};\n\nvar styles = StyleSheet.create({\n  main: {\n    flex: 1,\n    backgroundColor: \"#f2f2f2\"\n  },\n  modal: {\n    margin: 22,\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius: 4\n  },\n  video: {\n    flexDirection: 'row',\n    width: '100%',\n    height: '100%',\n    backgroundColor: '#000'\n  },\n  activityIndicator: {\n    position: 'absolute',\n    top: 70,\n    left: 70,\n    right: 70,\n    height: 50\n  },\n  list: {\n    backgroundColor: '#ffffff',\n    borderColor: '#ddd',\n    borderRadius: 4,\n    borderWidth: 1\n  },\n  listAccord: {\n    width: '100%'\n  },\n  listAccordTitle: {\n    fontSize: 14\n  },\n  listItem: {\n    marginLeft: '4%',\n    width: '95%',\n    backgroundColor: '#eee',\n    borderRadius: 4,\n    marginBottom: 2\n  },\n  listItemTitle: {\n    fontSize: 13\n  }\n});\nexport default PlayVideo;","map":{"version":3,"sources":["/home/brijesh/Desktop/Abhigyaan-main/screens/playvideo.js"],"names":["React","useState","useEffect","Video","VideoPlayer","Button","List","Modal","Portal","Provider","FontAwesome","useSelector","useOrientation","TouchableOpacity","PlayVideo","route","navigation","user","state","Auth","userdata","orientation","visible","setVisible","modalData","setModalData","error","setError","questions","setQuestions","question","setQuestion","loading","setLoading","reply","setReply","rploading","setRpLoading","params","id","videolink","video_name","showModal","q","hideModal","getComment","details","user_type","topic_id","st_id","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","fetch","method","headers","body","then","res","json","status","JSON","stringify","message","data","catch","err","submit","Alert","alert","text","submitReplay","question_id","styles","modal","alignSelf","fontSize","fontFamily","marginBottom","marginTop","padding","borderRadius","borderColor","borderWidth","textAlignVertical","flexDirection","alignItems","justifyContent","main","shouldPlay","resizeMode","RESIZE_MODE_CONTAIN","source","uri","Dimensions","get","width","height","paddingLeft","paddingRight","length","list","map","qi","answers","listAccord","listAccordTitle","props","a","ai","listItem","listItemTitle","StyleSheet","create","flex","backgroundColor","margin","video","activityIndicator","position","top","left","right","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Video } from 'expo-av';\nimport VideoPlayer from 'expo-video-player';\nimport {View,Text, TextInput,StyleSheet, ScrollView, Alert, Dimensions} from 'react-native';\nimport { Button, List, Modal, Portal, Provider } from 'react-native-paper';\nimport FontAwesome from 'react-native-vector-icons/FontAwesome';\nimport { useSelector } from 'react-redux';\nimport {useOrientation} from '../components/useOrientation';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\n\nconst PlayVideo=({route,navigation})=>{\n    const user = useSelector(state=>state.Auth.userdata)\n    const orientation = useOrientation()\n    const [visible, setVisible] = useState(false)\n    const [modalData, setModalData] = useState(null)\n    const [error, setError]=useState();\n    const [questions,setQuestions] = useState(null)\n    const [question,setQuestion] = useState('')\n    const [loading,setLoading] = useState(false)\n    const [reply,setReply] = useState('');\n    const [rploading,setRpLoading] = useState(false)\n    const {id,videolink,video_name}=route.params\n\n    const showModal = (q) =>{\n        setModalData(q)\n        setVisible(true)\n    }\n    const hideModal = () => {\n        setModalData(null)\n        setVisible(false)\n    }\n\n    const getComment = ()=>{\n        let details = {\n            user_type:'student',\n            topic_id:id,\n            id:user.st_id\n        }\n        let formBody = [];\n        for (let property in details) {\n            let encodedKey = encodeURIComponent(property);\n            let encodedValue = encodeURIComponent(details[property]);\n            formBody.push(encodedKey + \"=\" + encodedValue);\n        }\n        formBody = formBody.join(\"&\");\n\n        fetch('http://ais.omsai.info/api/v1/topic_comment', {\n              method: 'POST',\n              headers: {\n                  'Content-Type': 'application/x-www-form-urlencoded'\n              },\n              body: formBody\n        }).then(res => res.json()).then(res => {\n          if(res.status != 200){\n            setError(JSON.stringify(res.message))\n          }else{\n            // console.log(res.data)\n            setQuestions(res.data)\n          }\n        }).catch(err=>{\n          setError(err.message)\n        })\n    }\n\n    const submit = () =>{\n        setError(null)\n        if(question== null || question ==''){\n            return;\n        }\n        setLoading(true)\n        let details = {\n            user_type:'student',\n            topic_id:id,\n            question:question,\n            id:user.st_id\n        }\n\n        let formBody = [];\n        for (let property in details) {\n            let encodedKey = encodeURIComponent(property);\n            let encodedValue = encodeURIComponent(details[property]);\n            formBody.push(encodedKey + \"=\" + encodedValue);\n        }\n        formBody = formBody.join(\"&\");\n\n        fetch('http://ais.omsai.info/api/v1/submit_topic_comment', {\n              method: 'POST',\n              headers: {\n                  'Content-Type': 'application/x-www-form-urlencoded'\n              },\n              body: formBody\n        }).then(res => res.json()).then(res => {\n          if(res.status != 200){\n            setError(JSON.stringify(res.message))\n          }else{\n            // let credentials = res.data;\n            Alert.alert(\"Success\" ,\"Question saved.\",[{ text: \"OK\"}])\n            setQuestion('')\n            getComment()\n          }\n          setLoading(false)\n        }).catch(err=>{\n          setError(err.message)\n          setLoading(false)\n        })\n    }\n\n    const submitReplay = () =>{\n        setError(null)\n        if(reply== null || reply ==''){\n            return;\n        }\n        setRpLoading(true)\n        let details = {\n            user_type:'student',\n            question_id:(modalData)?modalData.id:'',\n            reply:reply,\n            id:user.st_id\n        }\n\n        let formBody = [];\n        for (let property in details) {\n            let encodedKey = encodeURIComponent(property);\n            let encodedValue = encodeURIComponent(details[property]);\n            formBody.push(encodedKey + \"=\" + encodedValue);\n        }\n        formBody = formBody.join(\"&\");\n\n        fetch('http://ais.omsai.info/api/v1/submit_topic_comment_reply', {\n              method: 'POST',\n              headers: {\n                  'Content-Type': 'application/x-www-form-urlencoded'\n              },\n              body: formBody\n        }).then(res => res.json()).then(res => {\n          if(res.status != 200){\n            setError(JSON.stringify(res.message))\n          }else{\n            hideModal()\n            setReply('')\n            getComment()\n          }\n          setRpLoading(false)\n        }).catch(err=>{\n          setError(err.message)\n          setRpLoading(false)\n        })\n    }\n\n    useEffect(() => {\n        if (questions == null) {\n          getComment()\n        }\n    }, [questions]);\n\n    useEffect(() => {\n        if (error) {\n          Alert.alert('An Error Occurred!', error, [{ text: 'Okay' }]);\n        }\n    }, [error]);\n\n    return(\n        <Provider>\n            <Portal>\n                <Modal visible={visible} onDismiss={()=>setVisible(false)} contentContainerStyle={styles.modal}>\n                    <View style={{alignSelf:'stretch'}}>\n                        <Text style={{fontSize:16,fontFamily:\"Rubik-Bold\",marginBottom:10}}>Reply</Text>\n                        <View>\n                            <Text style={{fontSize:14, fontFamily:\"Rubik-Bold\"}}>Question:-</Text>\n                            <Text style={{fontSize:12}}>{(modalData)?modalData.question:''}</Text>\n                        </View>\n                        <View style={{marginTop:10, marginBottom:10}}>\n                            <TextInput\n                                style={{padding:5,borderRadius:4,borderColor:'#ccc', borderWidth: 1, textAlignVertical: 'top' }}\n                                placeholder=\"Enter question replay..\"\n                                onChangeText={setReply}\n                                value={reply}\n                                numberOfLines={3}\n                                multiline={true}\n                                />\n                        </View>\n                    </View>\n                    <View style={{flexDirection:'row', alignItems:'center', justifyContent:'space-around'}}>\n                        <Button mode=\"contained\" color=\"#C53030\" onPress={()=>hideModal()}>Cancel</Button>\n                        <Button loading={rploading} mode=\"contained\" color=\"#00913d\" onPress={()=>submitReplay()}>Submit</Button>\n                    </View>\n                </Modal>\n            </Portal>\n            <View style={styles.main}>\n                <View style={{flexDirection:'row'}}>\n                    <VideoPlayer\n                        videoProps={{\n                            shouldPlay: false,\n                            resizeMode: Video.RESIZE_MODE_CONTAIN,\n                            source: {uri: 'http://ais.omsai.info/'+video_name},\n                        }}\n                        // showControlsOnLoad={true}\n                        inFullscreen={true}\n                        showFullscreenButton={true}\n                        width={Dimensions.get('window').width}\n                        height={orientation == 'PORTRAIT'?(Dimensions.get('window').height*40/100):Dimensions.get('window').height}\n                    />\n                </View>\n                <ScrollView keyboardShouldPersistTaps={'handled'}>\n                    <View style={{paddingLeft:10, paddingRight:10,marginTop:10}}>\n                        <View>\n                            <Text style={{fontSize:16}}>Have any question?</Text>\n                        </View>\n                        <View style={{marginTop:10}}>\n                            <TextInput\n                                style={{padding:5,borderRadius:4,borderColor:'#ccc', borderWidth: 1, textAlignVertical: 'top' }}\n                                placeholder=\"Enter question\"\n                                onChangeText={setQuestion}\n                                value={question}\n                                numberOfLines={3}\n                                multiline={true}\n                                />\n                        </View>\n                        <View style={{marginTop:10, flexDirection:'row', alignItems:'center', justifyContent:'center'}}>\n                            <Button loading={loading} mode=\"contained\" color=\"#C53030\" onPress={()=>submit()}>\n                                Submit\n                            </Button>\n                        </View>\n                        {(questions != null && questions.length > 0) &&\n                            <View style={{marginTop:10}}>\n                                <List.Section style={styles.list} titleStyle={{fontSize:15}} title={\"Questions (\"+questions.length+\")\"}>\n                                    {questions.map((q,qi)=>\n                                        q.answers.length > 0 ? <List.Accordion key={'acc-'+qi} style={styles.listAccord} titleStyle={styles.listAccordTitle} title={q.question} left={props => <FontAwesome {...props} name=\"comment\" />} >\n                                            {q.answers.map((a,ai)=><List.Item key={'ans-'+ai} style={styles.listItem} titleStyle={styles.listItemTitle} title={a.reply} left={props => <FontAwesome {...props} style={{marginTop:10}} name=\"comments-o\"/>} right={props => ai == 0 && <TouchableOpacity {...props} onPress={()=>showModal(q)}><FontAwesome name=\"reply\" /></TouchableOpacity>} />)}\n                                        </List.Accordion>\n                                        :<List.Item key={'acc-'+qi} style={styles.listAccord} titleStyle={styles.listAccordTitle} title={q.question} left={props => <FontAwesome {...props} style={{marginTop:10}} name=\"comment\"/>} right={props => <TouchableOpacity {...props} onPress={()=>showModal(q)}><FontAwesome style={{padding:5}} name=\"reply\" /></TouchableOpacity>} />\n                                    )}\n                                </List.Section>\n                            </View>\n                        }\n                    </View>\n                </ScrollView>\n         </View>\n        </Provider>\n    )\n};\nconst styles=StyleSheet.create({\n   main:{\n       flex:1,\n       backgroundColor:\"#f2f2f2\"\n   },\n   modal: {\n    margin: 22,\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius:4\n  },\n   video:{\n       flexDirection:'row',\n       width:'100%',\n       height:'100%',\n       backgroundColor:'#000'\n   },\n   activityIndicator: {\n        position: 'absolute',\n        top: 70,\n        left: 70,\n        right: 70,\n        height: 50,\n    },\n    list:{\n        backgroundColor:'#ffffff',\n        borderColor:'#ddd',\n        borderRadius:4,\n        borderWidth:1\n    },\n    listAccord:{\n        width:'100%'\n    },\n    listAccordTitle:{\n        fontSize:14\n    },\n    listItem:{\n        marginLeft:'4%',\n        width:'95%',\n        backgroundColor:'#eee',\n        borderRadius:4,\n        marginBottom:2\n    },\n    listItemTitle:{\n        fontSize:13\n    }\n});\nexport default PlayVideo;\n"]},"metadata":{},"sourceType":"module"}