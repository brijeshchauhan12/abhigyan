{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/brijesh/Desktop/Abhigyaan-main/screens/teacher/TeacherHome.js\";\nimport React, { useState, useEffect } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { useSelector } from 'react-redux';\nimport TopHeader from \"../../components/topheader\";\n\nvar TeacherHome = function TeacherHome(_ref) {\n  var navigation = _ref.navigation;\n  var user = useSelector(function (state) {\n    return state.Auth.userdata;\n  });\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dataSource = _useState4[0],\n      setDataSource = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      offset = _useState6[0],\n      setOffset = _useState6[1];\n\n  useEffect(function () {\n    return getData();\n  }, []);\n\n  var getData = function getData() {\n    setLoading(true);\n    var details = {\n      teacher_id: user.st_id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/teacher_questions_list?offset=' + offset, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (response) {\n      return response.json();\n    }).then(function (responseJson) {\n      if (responseJson.data.length > 0) {\n        setOffset(offset + 1);\n        setDataSource([].concat(_toConsumableArray(dataSource), _toConsumableArray(responseJson.data)));\n      }\n\n      setLoading(false);\n    }).catch(function (error) {\n      console.error(error);\n    });\n  };\n\n  var time_ago = function time_ago(time) {\n    switch (typeof time) {\n      case 'number':\n        break;\n\n      case 'string':\n        time = +new Date(time);\n        break;\n\n      case 'object':\n        if (time.constructor === Date) time = time.getTime();\n        break;\n\n      default:\n        time = +new Date();\n    }\n\n    var time_formats = [[60, 'seconds', 1], [120, '1 minute ago', '1 minute from now'], [3600, 'minutes', 60], [7200, '1 hour ago', '1 hour from now'], [86400, 'hours', 3600], [172800, 'Yesterday', 'Tomorrow'], [604800, 'days', 86400], [1209600, 'Last week', 'Next week'], [2419200, 'weeks', 604800], [4838400, 'Last month', 'Next month'], [29030400, 'months', 2419200], [58060800, 'Last year', 'Next year'], [2903040000, 'years', 29030400], [5806080000, 'Last century', 'Next century'], [58060800000, 'centuries', 2903040000]];\n    var seconds = (+new Date() - time) / 1000,\n        token = 'ago',\n        list_choice = 1;\n\n    if (seconds == 0) {\n      return 'Just now';\n    }\n\n    if (seconds < 0) {\n      seconds = Math.abs(seconds);\n      token = 'from now';\n      list_choice = 2;\n    }\n\n    var i = 0,\n        format;\n\n    while (format = time_formats[i++]) {\n      if (seconds < format[0]) {\n        if (typeof format[2] == 'string') return format[list_choice];else return Math.floor(seconds / format[2]) + ' ' + format[1] + ' ' + token;\n      }\n    }\n\n    return time;\n  };\n\n  var getTime = function getTime(date) {\n    return time_ago(new Date(date.replace(' ', 'T')));\n  };\n\n  var renderFooter = function renderFooter() {\n    return React.createElement(View, {\n      style: styles.footer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }, React.createElement(TouchableOpacity, {\n      activeOpacity: 0.9,\n      onPress: getData,\n      style: styles.loadMoreBtn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.btnText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }, \"Load More\"), loading ? React.createElement(ActivityIndicator, {\n      color: \"white\",\n      style: {\n        marginLeft: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }) : null));\n  };\n\n  var ItemView = function ItemView(_ref2) {\n    var item = _ref2.item;\n    return React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return getItem(item);\n      },\n      style: {\n        height: 80,\n        elevation: 1,\n        borderColor: \"#ccc\",\n        borderRadius: 1,\n        flexDirection: \"row\",\n        marginHorizontal: 5,\n        marginVertical: 5,\n        paddingVertical: 5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 1,\n        paddingHorizontal: 5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#444\",\n        fontSize: 17,\n        fontWeight: \"bold\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }, item.question), React.createElement(View, {\n      style: {\n        flex: 1,\n        paddingHorizontal: 5,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 13,\n        color: '#555',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 15\n      }\n    }, \"Subject\"), React.createElement(Text, {\n      style: {\n        fontSize: 12,\n        color: \"#888\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, item.sub_name)), React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 13,\n        color: '#555',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, \"Time\"), React.createElement(Text, {\n      style: {\n        fontSize: 12,\n        color: \"#888\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 15\n      }\n    }, getTime(item.created_at))))));\n  };\n\n  var ItemSeparatorView = function ItemSeparatorView() {\n    return React.createElement(View, {\n      style: {\n        height: 0.5,\n        width: '100%',\n        backgroundColor: '#C8C8C8'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }\n    });\n  };\n\n  var getItem = function getItem(item) {\n    navigation.navigate(\"TeacherReply\", {\n      question: item\n    });\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 5\n    }\n  }, React.createElement(TopHeader, {\n    title: \"Home\",\n    page: \"tab\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, React.createElement(FlatList, {\n    data: dataSource,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    ItemSeparatorComponent: null,\n    enableEmptySections: true,\n    renderItem: ItemView,\n    ListFooterComponent: renderFooter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    flex: 1,\n    backgroundColor: '#F0F0F0'\n  },\n  footer: {\n    padding: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexDirection: 'row'\n  },\n  loadMoreBtn: {\n    padding: 10,\n    backgroundColor: '#800000',\n    borderRadius: 4,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  btnText: {\n    color: 'white',\n    fontSize: 15,\n    textAlign: 'center'\n  }\n});\nexport default TeacherHome;","map":{"version":3,"sources":["/home/brijesh/Desktop/Abhigyaan-main/screens/teacher/TeacherHome.js"],"names":["React","useState","useEffect","useSelector","TopHeader","TeacherHome","navigation","user","state","Auth","userdata","loading","setLoading","dataSource","setDataSource","offset","setOffset","getData","details","teacher_id","st_id","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","fetch","method","headers","body","then","response","json","responseJson","data","length","catch","error","console","time_ago","time","Date","constructor","getTime","time_formats","seconds","token","list_choice","Math","abs","i","format","floor","date","replace","renderFooter","styles","footer","loadMoreBtn","btnText","marginLeft","ItemView","item","getItem","height","elevation","borderColor","borderRadius","flexDirection","marginHorizontal","marginVertical","paddingVertical","flex","paddingHorizontal","color","fontSize","fontWeight","question","alignItems","justifyContent","sub_name","created_at","ItemSeparatorView","width","backgroundColor","navigate","container","index","toString","StyleSheet","create","padding","textAlign"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect} from 'react';\nimport {\n  SafeAreaView,\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  FlatList,\n  ActivityIndicator,\n  Alert\n} from 'react-native';\nimport { useSelector } from 'react-redux';\nimport TopHeader from '../../components/topheader';\n\nconst TeacherHome = ({navigation}) => {\n  const user = useSelector(state => state.Auth.userdata);\n  const [loading, setLoading] = useState(true);\n  const [dataSource, setDataSource] = useState([]);\n  const [offset, setOffset] = useState(1);\n\n  useEffect(() => getData(), []);\n\n  const getData = () => {\n    setLoading(true);\n\n    let details = {\n        teacher_id:user.st_id\n    }\n\n    let formBody = [];\n    for (let property in details) {\n        let encodedKey = encodeURIComponent(property);\n        let encodedValue = encodeURIComponent(details[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n    formBody = formBody.join(\"&\");\n    \n    //Service to get the data from the server to render\n    fetch('http://ais.omsai.info/api/v1/teacher_questions_list?offset='+ offset, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: formBody\n        })\n      //Sending the currect offset with get request\n      .then((response) => response.json())\n      .then((responseJson) => {\n        //Successful response\n        if(responseJson.data.length > 0){\n          setOffset(offset + 1);\n          //Increasing the offset for the next API call\n          setDataSource([...dataSource, ...responseJson.data]);\n        }\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  };\n\n  const time_ago = (time) => {\n\n    switch (typeof time) {\n      case 'number':\n        break;\n      case 'string':\n        time = +new Date(time);\n        break;\n      case 'object':\n        if (time.constructor === Date) time = time.getTime();\n        break;\n      default:\n        time = +new Date();\n    }\n    var time_formats = [\n      [60, 'seconds', 1], // 60\n      [120, '1 minute ago', '1 minute from now'], // 60*2\n      [3600, 'minutes', 60], // 60*60, 60\n      [7200, '1 hour ago', '1 hour from now'], // 60*60*2\n      [86400, 'hours', 3600], // 60*60*24, 60*60\n      [172800, 'Yesterday', 'Tomorrow'], // 60*60*24*2\n      [604800, 'days', 86400], // 60*60*24*7, 60*60*24\n      [1209600, 'Last week', 'Next week'], // 60*60*24*7*4*2\n      [2419200, 'weeks', 604800], // 60*60*24*7*4, 60*60*24*7\n      [4838400, 'Last month', 'Next month'], // 60*60*24*7*4*2\n      [29030400, 'months', 2419200], // 60*60*24*7*4*12, 60*60*24*7*4\n      [58060800, 'Last year', 'Next year'], // 60*60*24*7*4*12*2\n      [2903040000, 'years', 29030400], // 60*60*24*7*4*12*100, 60*60*24*7*4*12\n      [5806080000, 'Last century', 'Next century'], // 60*60*24*7*4*12*100*2\n      [58060800000, 'centuries', 2903040000] // 60*60*24*7*4*12*100*20, 60*60*24*7*4*12*100\n    ];\n    var seconds = (+new Date() - time) / 1000,\n      token = 'ago',\n      list_choice = 1;\n  \n    if (seconds == 0) {\n      return 'Just now'\n    }\n    if (seconds < 0) {\n      seconds = Math.abs(seconds);\n      token = 'from now';\n      list_choice = 2;\n    }\n    var i = 0,\n      format;\n    while (format = time_formats[i++])\n      if (seconds < format[0]) {\n        if (typeof format[2] == 'string')\n          return format[list_choice];\n        else\n          return Math.floor(seconds / format[2]) + ' ' + format[1] + ' ' + token;\n      }\n    return time;\n  };\n\n  const getTime = (date) => {\n    return time_ago(new Date(date.replace(' ', 'T')));\n  };\n\n  const renderFooter = () => {\n    return (\n      //Footer View with Load More button\n      <View style={styles.footer}>\n        <TouchableOpacity\n          activeOpacity={0.9}\n          onPress={getData}\n          //On Click of button load more data\n          style={styles.loadMoreBtn}>\n          <Text style={styles.btnText}>Load More</Text>\n          {loading ? (\n            <ActivityIndicator\n              color=\"white\"\n              style={{marginLeft: 8}} />\n          ) : null}\n        </TouchableOpacity>\n      </View>\n    );\n  };\n\n  const ItemView = ({item}) => {\n    return (\n      // Flat List Item\n      <TouchableOpacity onPress={() => getItem(item)}\n        style={{\n          height: 80,\n          elevation: 1,\n          borderColor: \"#ccc\",\n          borderRadius: 1,\n          flexDirection: \"row\",\n          marginHorizontal: 5,\n          marginVertical:5,\n          paddingVertical:5\n        }}>\n        <View style={{flex:1, paddingHorizontal:5}}>\n          <Text style={{\n            color: \"#444\",\n            fontSize: 17,\n            fontWeight: \"bold\"\n          }}>{item.question}</Text>\n          <View style={{flex:1, paddingHorizontal:5, flexDirection:'row', alignItems:'center', justifyContent:'space-between'}}>\n            <View>\n              <Text style={{fontSize:13,color:'#555', fontWeight:'bold'}}>Subject</Text>\n              <Text style={{fontSize:12,color: \"#888\"}}>{item.sub_name}</Text>\n            </View>\n            <View>\n              <Text style={{fontSize:13,color:'#555', fontWeight:'bold'}}>Time</Text>\n              <Text style={{fontSize:12,color: \"#888\"}}>{getTime(item.created_at)}</Text>\n            </View>\n          </View>\n        </View>\n      </TouchableOpacity>\n    );\n  };\n\n  const ItemSeparatorView = () => {\n    return (\n      // Flat List Item Separator\n      <View\n        style={{\n          height: 0.5,\n          width: '100%',\n          backgroundColor: '#C8C8C8',\n        }}\n      />\n    );\n  };\n\n  const getItem = (item) => {\n    //Function for click on an item\n    //Alert.alert(\"Click\", item.id+\" - \"+item.question, [{ text: 'Okay' }]);\n    // console.log(item);\n    navigation.navigate(\"TeacherReply\",{question:item});\n  };\n\n  return (\n    <SafeAreaView style={{flex: 1}}>\n      <TopHeader title=\"Home\" page='tab'/>\n      <View style={styles.container}>\n        <FlatList\n          data={dataSource}\n          keyExtractor={(item, index) => index.toString()}\n          ItemSeparatorComponent={null}\n          enableEmptySections={true}\n          renderItem={ItemView}\n          ListFooterComponent={renderFooter}\n        />\n      </View>\n    </SafeAreaView>\n  )\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    flex: 1,\n    backgroundColor:'#F0F0F0',\n  },\n  footer: {\n    padding: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexDirection: 'row',\n  },\n  loadMoreBtn: {\n    padding: 10,\n    backgroundColor: '#800000',\n    borderRadius: 4,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  btnText: {\n    color: 'white',\n    fontSize: 15,\n    textAlign: 'center',\n  }\n});\n\nexport default TeacherHome;"]},"metadata":{},"sourceType":"module"}