{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/brijesh/Desktop/Abhigyaan-main/screens/ShareApp.js\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Share from \"react-native-web/dist/exports/Share\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TopHeader from \"../components/topheader\";\nimport Const from \"../components/constant\";\n\nvar ShareApp = function ShareApp(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      sharedata = _useState2[0],\n      setShareData = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var getShareData = function getShareData() {\n    setError(null);\n    setLoading(true);\n    var details = {\n      school_id: Const.school_id\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/share_url', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        setShareData(res.data);\n      }\n\n      setLoading(false);\n    }).catch(function (err) {\n      setError(err.message);\n      setLoading(false);\n    });\n  };\n\n  var Sharebtn = function Sharebtn() {\n    var result;\n    return _regeneratorRuntime.async(function Sharebtn$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Share.share({\n              message: sharedata ? sharedata.message + \"\\n\" + sharedata.url : '',\n              title: sharedata ? sharedata.title : '',\n              url: sharedata ? sharedata.url : ''\n            }));\n\n          case 3:\n            result = _context.sent;\n\n            if (result.action === Share.sharedAction) {\n              Alert.alert('SUCCESS', 'Post Shared', [{\n                text: 'Okay'\n              }]);\n            } else if (result.action === Share.dismissedAction) {\n              setError('Post Cancelled');\n            }\n\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            setError(_context.t0.message);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  useEffect(function () {\n    if (sharedata == null) {\n      getShareData();\n    }\n  }, [sharedata]);\n  useEffect(function () {\n    if (error) {\n      Alert.alert('An Error Occurred!', error, [{\n        text: 'Okay'\n      }]);\n    }\n  }, [error]);\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, React.createElement(TopHeader, {\n    title: \"Share App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    size: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }) : React.createElement(View, {\n    style: styles.card,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, React.createElement(Image, {\n    style: styles.thumb,\n    source: require(\"../assets/app_screen.png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    style: styles.h1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, sharedata && sharedata.title), React.createElement(Text, {\n    style: styles.body,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, sharedata && sharedata.message), React.createElement(TouchableOpacity, {\n    style: styles.shareBtn,\n    onPress: function onPress() {\n      return Sharebtn();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.shareTxt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"SHARE\")))));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  card: {\n    width: \"80%\",\n    borderRadius: 10,\n    borderColor: \"lightgray\",\n    borderWidth: 1,\n    justifyContent: \"center\",\n    alignItems: 'center'\n  },\n  h1: {\n    fontWeight: \"bold\",\n    fontSize: 30,\n    color: \"#000\",\n    margin: 15\n  },\n  body: {\n    color: \"#000\",\n    paddingHorizontal: 10,\n    textAlign: \"justify\",\n    padding: 10\n  },\n  thumb: {\n    height: 260,\n    marginBottom: 10,\n    borderTopLeftRadius: 10,\n    borderTopRightRadius: 10\n  },\n  shareBtn: {\n    margin: 10,\n    backgroundColor: \"#C53030\",\n    padding: 10,\n    width: \"80%\",\n    borderRadius: 20\n  },\n  shareTxt: {\n    fontSize: 20,\n    color: \"#fff\",\n    alignSelf: \"center\"\n  }\n});\nexport default ShareApp;","map":{"version":3,"sources":["/home/brijesh/Desktop/Abhigyaan-main/screens/ShareApp.js"],"names":["React","useEffect","useState","TopHeader","Const","ShareApp","navigation","sharedata","setShareData","error","setError","loading","setLoading","getShareData","details","school_id","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","fetch","method","headers","body","then","res","json","status","JSON","stringify","message","data","catch","err","Sharebtn","Share","share","url","title","result","action","sharedAction","Alert","alert","text","dismissedAction","flex","styles","container","card","thumb","require","h1","shareBtn","shareTxt","StyleSheet","create","backgroundColor","alignItems","justifyContent","width","borderRadius","borderColor","borderWidth","fontWeight","fontSize","color","margin","paddingHorizontal","textAlign","padding","height","marginBottom","borderTopLeftRadius","borderTopRightRadius","alignSelf"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Alert, Share, Image, ActivityIndicator } from 'react-native';\nimport TopHeader from '../components/topheader';\nimport Const from '../components/constant'\n\nconst ShareApp = ({navigation}) => {\n  const [sharedata, setShareData] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const getShareData =()=>{\n      setError(null)\n      setLoading(true)\n      let details = {\n        school_id:Const.school_id\n      }\n\n      let formBody = [];\n      for (let property in details) {\n          let encodedKey = encodeURIComponent(property);\n          let encodedValue = encodeURIComponent(details[property]);\n          formBody.push(encodedKey + \"=\" + encodedValue);\n      }\n      formBody = formBody.join(\"&\");\n\n      fetch('http://ais.omsai.info/api/v1/share_url', {\n          method: 'POST',\n          headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          body: formBody\n      }).then(res => res.json()).then((res)=>{\n          if(res.status != 200){\n              setError(JSON.stringify(res.message))\n          }else{\n            setShareData(res.data);\n          }\n          setLoading(false)\n          \n      }).catch((err)=>{\n          setError(err.message)\n          setLoading(false)\n      })\n  }\n\n  const Sharebtn = async () => {\n    try {\n      const result = await Share.share({\n        message:sharedata ? sharedata.message+\"\\n\"+sharedata.url :'',\n        title:sharedata ? sharedata.title: '',\n        url:sharedata ? sharedata.url : ''\n      });\n\n      if (result.action === Share.sharedAction) {\n        Alert.alert('SUCCESS', 'Post Shared', [{ text: 'Okay' }]);\n      } else if (result.action === Share.dismissedAction) {\n        setError('Post Cancelled');\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  useEffect(()=>{\n    if(sharedata == null){\n      getShareData();\n    }\n  },[sharedata]);\n\n  useEffect(()=>{\n    if(error){\n      Alert.alert('An Error Occurred!', error, [{ text: 'Okay' }]);\n    }\n  },[error])\n\n  return (\n    <View style={{flex:1}}>\n      <TopHeader title=\"Share App\"/>\n      <View style={styles.container}>\n        {loading ?\n          <ActivityIndicator size=\"large\"/>\n          :\n        <View style={styles.card}>\n          <Image style={styles.thumb}  source={require('../assets/app_screen.png')}/>\n          <Text style={styles.h1}>{sharedata && sharedata.title}</Text>\n          <Text style={styles.body}>{sharedata && sharedata.message}</Text>\n          <TouchableOpacity style={styles.shareBtn} onPress={()=>Sharebtn()}>\n            <Text style={styles.shareTxt}>SHARE</Text>\n          </TouchableOpacity>\n        </View>\n        }\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  card:{\n    width:\"80%\",\n    borderRadius:10,\n    borderColor:\"lightgray\",\n    borderWidth:1,\n    justifyContent:\"center\",\n    alignItems: 'center',\n\n  },\n  h1:{\n    fontWeight:\"bold\",\n    fontSize:30,\n    color:\"#000\",\n    margin:15,\n  },\n  body:{\n    color:\"#000\",\n    paddingHorizontal:10,\n    textAlign:\"justify\",\n    padding:10\n    \n  },\n  thumb:{\n    // width:\"100%\",\n    height:260,\n    marginBottom:10,\n    borderTopLeftRadius:10,\n    borderTopRightRadius:10\n  },\n  shareBtn:{\n    margin:10,\n    backgroundColor:\"#C53030\",\n    padding:10,\n    width:\"80%\",\n    borderRadius:20,\n  },\n  shareTxt:{\n    fontSize:20,\n    color:\"#fff\",\n    alignSelf:\"center\"\n  }\n});\n\nexport default ShareApp;"]},"metadata":{},"sourceType":"module"}