{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/brijesh/Desktop/Abhigyaan-main/screens/buypackage.js\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Picker from \"react-native-web/dist/exports/Picker\";\nimport { RadioButton, Button } from 'react-native-paper';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport * as donotallow from \"../store/action/auth\";\nimport { useSelector } from 'react-redux';\nimport TopHeader from \"../components/topheader\";\n\nvar BuyPackage = function BuyPackage(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var subject = route.params.subject;\n  var user = useSelector(function (state) {\n    return state.Auth.userdata;\n  });\n\n  var _useState = useState('monthly_price'),\n      _useState2 = _slicedToArray(_useState, 2),\n      rdcheck = _useState2[0],\n      setRdCheck = _useState2[1];\n\n  var _useState3 = useState('Month'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pkgtitle = _useState4[0],\n      setPkgtitle = _useState4[1];\n\n  var _useState5 = useState('1'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pkgcount = _useState6[0],\n      setPkgcount = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      price = _useState8[0],\n      setPrice = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  var countarr = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11'];\n\n  var submit = function submit() {\n    setError(null);\n    setLoading(true);\n    var details = {\n      student_id: user.st_id,\n      subject_id: subject.sub_id,\n      type: pkgtitle.toLowerCase() + \"ly\",\n      total_months: pkgtitle == 'Month' ? pkgcount : '',\n      price: pkgtitle == 'Month' ? subject.monthly_price : subject.yearly_price,\n      total_price: price\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/pay_now', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: formBody\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      if (res.status != 200) {\n        setError(JSON.stringify(res.message));\n      } else {\n        Alert.alert(\"Subscribed successfully\", res.message, [{\n          text: \"OK\",\n          onPress: function onPress() {\n            return navigation.navigate(\"MathScreen\", {\n              subject: subject\n            });\n          }\n        }]);\n      }\n\n      setLoading(false);\n    }).catch(function (err) {\n      setError(err.message);\n      setLoading(false);\n    });\n  };\n\n  useEffect(function () {\n    if (rdcheck == 'monthly_price') {\n      setPkgtitle('Month');\n      setPkgcount('1');\n      setPrice(subject.monthly_price);\n    }\n\n    if (rdcheck == 'yearly_price') {\n      setPkgtitle('Year');\n      setPkgcount('1');\n      setPrice(subject.yearly_price);\n    }\n  }, [rdcheck]);\n  useEffect(function () {\n    if (pkgcount) {\n      setPrice((pkgtitle == 'Month' ? subject.monthly_price : subject.yearly_price) * pkgcount);\n    }\n  }, [pkgcount]);\n  useEffect(function () {\n    if (error) {\n      Alert.alert('An Error Occurred!', error, [{\n        text: 'Okay'\n      }]);\n    }\n  }, [error]);\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, React.createElement(TopHeader, {\n    title: \"Profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      flex: 1,\n      position: 'relative',\n      marginTop: 20,\n      padding: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, subject.sub_name)), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-around',\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'flex-start'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, React.createElement(RadioButton, {\n    value: \"monthly_price\",\n    status: rdcheck === 'monthly_price' ? 'checked' : 'unchecked',\n    onPress: function onPress() {\n      return setRdCheck('monthly_price');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Monthly\")), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'flex-start'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, React.createElement(RadioButton, {\n    value: \"yearly_price\",\n    status: rdcheck === 'yearly_price' ? 'checked' : 'unchecked',\n    onPress: function onPress() {\n      return setRdCheck('yearly_price');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, \"Yearly\"))), rdcheck == 'monthly_price' && React.createElement(View, {\n    style: {\n      marginTop: 20,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'flex-start'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"Select Month:\"), React.createElement(View, {\n    style: {\n      marginLeft: 10,\n      borderColor: \"#2F4858\",\n      borderWidth: .5,\n      width: 150\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, React.createElement(Picker, {\n    selectedValue: pkgcount,\n    style: {\n      height: 35\n    },\n    onValueChange: function onValueChange(v, i) {\n      return setPkgcount(v);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, countarr.map(function (dat, index) {\n    return React.createElement(Picker.Item, {\n      key: 'cnt-' + index,\n      label: dat,\n      value: dat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 45\n      }\n    });\n  })))), React.createElement(View, {\n    style: {\n      marginTop: 20,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'flex-start'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, \"Price: \"), React.createElement(Text, {\n    style: {\n      fontFamily: \"Rubik-Medium\",\n      fontSize: 17\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 31\n    }\n  }, price)), React.createElement(View, {\n    style: {\n      marginTop: 20,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, React.createElement(Button, {\n    loading: loading,\n    mode: \"contained\",\n    color: \"#C53030\",\n    onPress: function onPress() {\n      return submit();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, 'Pay now ' + price))));\n};\n\nvar styles = StyleSheet.create({\n  user: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingTop: 20,\n    height: 80,\n    justifyContent: \"space-around\"\n  },\n  logo: {\n    height: 30,\n    width: 30,\n    justifyContent: \"center\",\n    alignItems: 'center',\n    marginLeft: 10\n  },\n  logout: {\n    marginLeft: \"60%\",\n    marginRight: \"5%\"\n  },\n  usernamechild: {\n    color: \"#FFFFFF\",\n    fontSize: 14,\n    fontFamily: \"Rubik-Regular\"\n  },\n  logoutchild: {\n    color: \"#FFFFFF\",\n    fontSize: 9,\n    fontFamily: \"Rubik-Medium\"\n  }\n});\nexport default BuyPackage;","map":{"version":3,"sources":["/home/brijesh/Desktop/Abhigyaan-main/screens/buypackage.js"],"names":["React","useEffect","useState","RadioButton","Button","LinearGradient","Ionicons","donotallow","useSelector","TopHeader","BuyPackage","route","navigation","subject","params","user","state","Auth","userdata","rdcheck","setRdCheck","pkgtitle","setPkgtitle","pkgcount","setPkgcount","price","setPrice","error","setError","loading","setLoading","countarr","submit","details","student_id","st_id","subject_id","sub_id","type","toLowerCase","total_months","monthly_price","yearly_price","total_price","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","fetch","method","headers","body","then","res","json","status","JSON","stringify","message","Alert","alert","text","onPress","navigate","catch","err","flex","position","marginTop","padding","flexDirection","alignItems","justifyContent","fontSize","sub_name","marginLeft","borderColor","borderWidth","width","height","v","i","map","dat","index","fontFamily","styles","StyleSheet","create","paddingTop","logo","logout","marginRight","usernamechild","color","logoutchild"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Alert, Picker } from 'react-native';\nimport { RadioButton, Button } from 'react-native-paper';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport Ionicons from \"react-native-vector-icons/Ionicons\";\nimport * as  donotallow from \"../store/action/auth\";\nimport { useSelector } from 'react-redux';\nimport TopHeader from '../components/topheader';\n\nconst BuyPackage=({route,navigation})=>{\n  const {subject}=route.params;\n  const user = useSelector(state=>state.Auth.userdata)\n  const [rdcheck, setRdCheck] = useState('monthly_price');\n  const [pkgtitle, setPkgtitle] = useState('Month')\n  const [pkgcount, setPkgcount] = useState('1')\n  const [price, setPrice] = useState(0)\n  const [error, setError] = useState(null)\n  const [loading,setLoading] = useState(false);\n  let countarr = ['1','2','3','4','5','6','7','8','9','10','11'];\n\n  const submit = ()=>{\n    setError(null)\n    setLoading(true)\n    let details = {\n      student_id: user.st_id,\n      subject_id: subject.sub_id,\n      type:pkgtitle.toLowerCase()+\"ly\",\n      total_months: (pkgtitle=='Month')?pkgcount:'',\n      price: (pkgtitle=='Month'?subject.monthly_price:subject.yearly_price),\n      total_price: price\n    }\n    // console.log(details)\n    let formBody = [];\n    for (let property in details) {\n        let encodedKey = encodeURIComponent(property);\n        let encodedValue = encodeURIComponent(details[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n    formBody = formBody.join(\"&\");\n    fetch('http://ais.omsai.info/api/v1/pay_now', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: formBody\n      }).then(res => res.json()).then(res => {\n        if(res.status != 200){\n          setError(JSON.stringify(res.message))\n        }else{\n          // console.log(res);\n          Alert.alert(\"Subscribed successfully\" ,res.message,[\n              { text: \"OK\", onPress: () => navigation.navigate(\"MathScreen\",{\n                subject:subject\n              }) }\n          ])\n        }\n        setLoading(false)\n      }).catch(err=>{\n        setError(err.message)\n        setLoading(false)\n      })\n  }\n\n  useEffect(()=>{\n    if(rdcheck=='monthly_price'){\n      setPkgtitle('Month')\n      setPkgcount('1')\n      setPrice(subject.monthly_price)\n    }\n\n    if(rdcheck=='yearly_price'){\n      setPkgtitle('Year')\n      setPkgcount('1')\n      setPrice(subject.yearly_price)\n    }\n  },[rdcheck])\n\n  useEffect(()=>{\n    if(pkgcount){\n      setPrice((pkgtitle=='Month'?subject.monthly_price:subject.yearly_price) * pkgcount)\n    }\n  },[pkgcount])\n\n  useEffect(() => {\n    if (error) {\n      Alert.alert('An Error Occurred!', error, [{ text: 'Okay' }]);\n    }\n  }, [error]);\n\n  return (\n    <View style={{flex:1}}>\n      <TopHeader title=\"Profile\"/>\n      <View style={{flex:1, position:'relative', marginTop:20, padding:10}}>\n        <View style={{flexDirection:'row', alignItems:'center', justifyContent:'center'}}>\n          <Text style={{fontSize:20}}>{subject.sub_name}</Text>\n        </View>\n        <View style={{flexDirection:'row', alignItems:'center', justifyContent:'space-around', marginTop:10}}>\n          <View style={{flexDirection:'row', alignItems:'center', justifyContent:'flex-start'}}>\n            <RadioButton value=\"monthly_price\" status={ rdcheck === 'monthly_price' ? 'checked' : 'unchecked' } onPress={() => setRdCheck('monthly_price')} />\n            <Text>Monthly</Text>\n          </View>\n          <View style={{flexDirection:'row', alignItems:'center', justifyContent:'flex-start'}}>\n            <RadioButton value=\"yearly_price\" status={ rdcheck === 'yearly_price' ? 'checked' : 'unchecked' } onPress={() => setRdCheck('yearly_price')}/>\n            <Text>Yearly</Text>\n          </View>\n        </View>\n        {rdcheck == 'monthly_price' && \n          <View style={{marginTop:20,flexDirection:'row', alignItems:'center', justifyContent:'flex-start'}}>\n            <Text>Select Month:</Text>\n            <View style={{marginLeft:10,borderColor:\"#2F4858\",borderWidth:.5, width:150}}>\n              <Picker selectedValue={pkgcount} style={{height:35 }} onValueChange={(v,i)=> setPkgcount(v)}>\n                {countarr.map((dat,index)=> <Picker.Item  key={'cnt-'+index} label={dat} value={dat} />)}\n              </Picker>\n            </View>\n          </View>\n        }\n        \n        <View style={{marginTop:20,flexDirection:'row', alignItems:'center', justifyContent:'flex-start'}}>\n          <Text>Price: </Text><Text style={{fontFamily:\"Rubik-Medium\", fontSize:17}}>{price}</Text>\n        </View>\n        <View style={{marginTop:20,flexDirection:'row', alignItems:'center', justifyContent:'center'}}>\n          <Button loading={loading} mode=\"contained\" color=\"#C53030\" onPress={()=>submit()}>\n            {'Pay now '+price}\n          </Button>\n        </View>\n      </View>\n    </View>\n  )\n}\n\nconst styles=StyleSheet.create({\n  user:{\n    flexDirection:\"row\",\n    alignItems:\"center\",\n    paddingTop:20,\n    height:80,\n    justifyContent:\"space-around\"\n  },\n  logo:{\n    height:30,\n    width:30,\n    justifyContent:\"center\",\n    alignItems:'center',\n    marginLeft:10\n  },\n  logout:{\n    marginLeft:\"60%\",\n    marginRight:\"5%\"\n  },\n  usernamechild:{\n    color:\"#FFFFFF\",\n    fontSize:14,\n    fontFamily:\"Rubik-Regular\"\n  },\n  logoutchild:{\n    color:\"#FFFFFF\",\n    fontSize:9,\n    fontFamily:\"Rubik-Medium\"\n  }\n})\nexport default BuyPackage;"]},"metadata":{},"sourceType":"module"}